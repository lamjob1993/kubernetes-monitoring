# **üö® –ê–≤–∞—Ä–∏–π–Ω–∞—è —Å–∏—Ç—É–∞—Ü–∏—è: –ö–ª–∏–µ–Ω—Ç—ã –Ω–µ –º–æ–≥—É—Ç –ø–æ–ª—É—á–∏—Ç—å –∫—Ä–µ–¥–∏—Ç!**  
## *(–ü—Ä–æ—Å—Ç–æ–π –≥–∞–π–¥ –¥–ª—è —Å—Ä–æ—á–Ω–æ–≥–æ —Ä–µ–∞–≥–∏—Ä–æ–≤–∞–Ω–∏—è)*  

---

### **üîç –®–∞–≥ 1: –ë—ã—Å—Ç—Ä–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ (–∫—É–¥–∞ —Å–º–æ—Ç—Ä–µ—Ç—å?)**
1. **–û—Ç–∫—Ä—ã–≤–∞–µ–º Grafana** ‚Üí **–î–∞—à–±–æ—Ä–¥ "Kubernetes / Pods"**:  
   - üî¥ **–ö—Ä–∞—Å–Ω—ã–µ** –ø–æ–¥—ã = `CrashLoopBackOff` –∏–ª–∏ `Error`  
   - üü° **–ñ–µ–ª—Ç—ã–µ** –ø–æ–¥—ã = `Pending` (–Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç —Ä–µ—Å—É—Ä—Å–æ–≤)  
   - üí° **–õ–æ–≥–∏**: `kubectl logs <pod-name> --tail=50`  

2. **–ü—Ä–æ–≤–µ—Ä—è–µ–º –º–µ—Ç—Ä–∏–∫–∏**:  
   - **cAdvisor**: `container_cpu_usage > 90%` ‚Üí –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∞.  
   - **Actuator**: `http_server_errors_total > 0` ‚Üí –æ—à–∏–±–∫–∏ API.  
   - **kube-state-metrics**: `kube_pod_restarts_total` ‚Üí —á–∞—Å—Ç—ã–µ —Ä–µ—Å—Ç–∞—Ä—Ç—ã.  

---

### **üõ†Ô∏è –®–∞–≥ 2: –≠–∫—Å—Ç—Ä–µ–Ω–Ω—ã–µ –º–µ—Ä—ã**
#### **–ï—Å–ª–∏ –ø–æ–¥—ã –ø–∞–¥–∞—é—Ç (CrashLoopBackOff)**:
```bash
# 1. –†–µ—Å—Ç–∞—Ä—Ç –ø—Ä–æ–±–ª–µ–º–Ω–æ–≥–æ –¥–µ–ø–ª–æ–π–º–µ–Ω—Ç–∞:
kubectl rollout restart deployment/<calculator-adapter>

# 2. –í—Ä–µ–º–µ–Ω–Ω–æ–µ —É–≤–µ–ª–∏—á–µ–Ω–∏–µ —Ä–µ–ø–ª–∏–∫:
kubectl scale deployment <adapter> --replicas=3
```

#### **–ï—Å–ª–∏ –∑–∞–≤–∏—Å–∞—é—Ç –∑–∞–ø—Ä–æ—Å—ã (High CPU/RAM)**:
```bash
# 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ PostgreSQL:
kubectl exec -it <postgres-pod> -- psql -U user -c "SELECT * FROM pg_stat_activity WHERE state='active';"

# 2. –°–Ω–∏–∑–∏—Ç—å –Ω–∞–≥—Ä—É–∑–∫—É (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ):
kubectl autoscale deployment <adapter> --min=2 --max=5 --cpu-percent=70
```

#### **–ï—Å–ª–∏ –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç –º–µ—Å—Ç–∞ (Document Adapter)**:
```bash
# 1. –û—á–∏—Å—Ç–∏—Ç—å —Å—Ç–∞—Ä—ã–µ PDF:
kubectl exec -it <document-adapter-pod> -- find /data -type f -mtime +7 -delete

# 2. –î–æ–±–∞–≤–∏—Ç—å Volume:
kubectl edit pvc <document-pvc>  # –£–≤–µ–ª–∏—á–∏—Ç—å storage: 10Gi ‚Üí 20Gi
```

---

### **üì¢ –®–∞–≥ 3: –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –¥–ª—è –∫–æ–º–∞–Ω–¥—ã**
1. **–°–æ–æ–±—â–∏—Ç–µ –≤ —á–∞—Ç**:  
   ```text
   üö® –°–†–û–ß–ù–û: –ö–æ–Ω–≤–µ–π–µ—Ä –∫—Ä–µ–¥–∏—Ç–æ–≤ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç!
   - –ü—Ä–æ–±–ª–µ–º–∞: <CrashLoopBackOff/High CPU/–î–∏—Å–∫ –ø–æ–ª–Ω—ã–π>
   - –ó–∞—Ç—Ä–æ–Ω—É—Ç—ã–µ —Å–µ—Ä–≤–∏—Å—ã: calculator-adapter, document-adapter
   - –í—Ä–µ–º–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ: –£–≤–µ–ª–∏—á–µ–Ω–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ–ø–ª–∏–∫ (3 ‚Üí 5)
   - –û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π: @devops_team
   ```
2. **–°–æ–∑–¥–∞–π—Ç–µ –∏–Ω—Ü–∏–¥–µ–Ω—Ç** –≤ Jira/Slack:  
   ```text
   Title: "–ê–≤–∞—Ä–∏—è: –ö–ª–∏–µ–Ω—Ç—ã –Ω–µ –º–æ–≥—É—Ç –æ—Ñ–æ—Ä–º–∏—Ç—å –∫—Ä–µ–¥–∏—Ç"
   Priority: Critical
   ```

---

### **üîß –®–∞–≥ 4: –ö–∞–∫ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏—Ç—å –≤ –±—É–¥—É—â–µ–º?**
1. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–ª–µ—Ä—Ç—ã –≤ Prometheus**:  
   ```yaml
   # –ü—Ä–∏–º–µ—Ä –∞–ª–µ—Ä—Ç–∞ –¥–ª—è CPU
   - alert: HighCPU
     expr: container_cpu_usage_seconds_total > 0.9
     for: 5m
     labels:
       severity: critical
     annotations:
       summary: "Pod {{ $labels.pod }} –ø–µ—Ä–µ–≥—Ä—É–∂–µ–Ω (CPU > 90%)"
   ```

2. **–î–æ–±–∞–≤—å—Ç–µ Health Checks –≤ Actuator**:  
   ```java
   // –ü—Ä–∏–º–µ—Ä –¥–ª—è Spring Boot
   @GetMapping("/health")
   public ResponseEntity<String> health() {
       if (dbIsOk() && diskHasSpace()) {
           return ResponseEntity.ok("OK");
       } else {
           return ResponseEntity.status(503).body("Service Unavailable");
       }
   }
   ```

3. **–ü—Ä–æ–≤–µ–¥–∏—Ç–µ post-mortem**:  
   ```text
   –ü—Ä–∏—á–∏–Ω–∞: –£—Ç–µ—á–∫–∞ –ø–∞–º—è—Ç–∏ –≤ Java-–∞–¥–∞–ø—Ç–µ—Ä–µ –∏–∑-–∑–∞ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è PDF.  
   –†–µ—à–µ–Ω–∏–µ: –£–≤–µ–ª–∏—á–∏–ª–∏ –ª–∏–º–∏—Ç—ã Pod + –ø–æ—á–∏—Å—Ç–∏–ª–∏ –∫—ç—à –∫–∞–∂–¥—ã–µ 24—á.  
   ```

---

### **üí° –ü–∞–º—è—Ç–∫–∞ –¥–ª—è DevOps**  
| –ü—Ä–æ–±–ª–µ–º–∞               | –ö–æ–º–∞–Ω–¥–∞ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Ñ–∏–∫—Å–∞              |  
|-------------------------|------------------------------------------|  
| **–ü–æ–¥—ã –ø–∞–¥–∞—é—Ç**         | `kubectl rollout restart deployment/...`|  
| **High CPU**            | `kubectl top pods` ‚Üí –£–≤–µ–ª–∏—á–∏—Ç—å —Ä–µ–ø–ª–∏–∫–∏  |  
| **–î–∏—Å–∫ –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω**     | `kubectl exec ... -- df -h` ‚Üí –û—á–∏—Å—Ç–∏—Ç—å  |  
| **–û—à–∏–±–∫–∏ PostgreSQL**   | `kubectl logs <postgres-pod>`           |  

**–ì–ª–∞–≤–Ω–æ–µ**:  
1. –°–Ω–∞—á–∞–ª–∞ **—Å—Ç–∞–±–∏–ª–∏–∑–∏—Ä—É–π—Ç–µ —Å–∏—Å—Ç–µ–º—É** (—Ä–µ—Å—Ç–∞—Ä—Ç/—Å–∫–µ–π–ª–∏–Ω–≥).  
2. –ü–æ—Ç–æ–º **–∏—â–∏—Ç–µ –∫–æ—Ä–Ω–µ–≤—É—é –ø—Ä–∏—á–∏–Ω—É** (–ª–æ–≥–∏, –º–µ—Ç—Ä–∏–∫–∏).  
3. –§–∏–∫—Å–∏—Ç–µ **–Ω–∞–≤—Å–µ–≥–¥–∞** (–∞–ª–µ—Ä—Ç—ã, –∞–≤—Ç–æ—Å–∫–µ–π–ª–∏–Ω–≥, –¥–æ—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–¥–∞).  

**üìå –í–∞–∂–Ω–æ**: –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –∫—Ä–∏—Ç–∏—á–Ω–∞—è ‚Äî **—Ä—É—á–Ω–æ–π —Ä–µ—Å—Ç–∞—Ä—Ç –±—ã—Å—Ç—Ä–µ–µ**, —á–µ–º –∂–¥–∞—Ç—å –∞–≤—Ç–æ—Ñ–∏–∫—Å–æ–≤!
